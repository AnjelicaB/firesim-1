name: firesim-cull-instances

on:
  schedule:
    - cron: "0 0,12 * * *"

jobs:
  cull-old-ci-instances:
    name: cull-old-ci-instances
    runs-on: ubuntu-latest
    env:
      TERM: xterm-256-color
    steps:
      - uses: actions/checkout@v2
        with:
          ref: dev
      - uses: ./.github/actions/repo-setup-aws
        with:
          aws-access-key-id: ${{ secrets.AWS_ACCESS_KEY_ID }}
          aws-secret-access-key: ${{ secrets.AWS_SECRET_ACCESS_KEY }}
          aws-default-region: ${{ secrets.AWS_DEFAULT_REGION }}
      - run: |
          .github/scripts/cull-old-ci-instances.py
